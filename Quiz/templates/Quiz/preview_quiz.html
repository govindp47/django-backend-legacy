{% extends 'Home/base.html' %}
{% load static %}
{% block title %}
NIRGOVIND-Quiz-preview
{% endblock title %}

{% block css %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
<link rel="stylesheet" href="{% static 'quiz/style.css' %}">
{% endblock css %}

{% block body %}

<!-- ======= Main ======= -->
<div class="main">
  <div>
    <button id="back-button"><i class="fas fa-arrow-left"></i></button>
  </div>
  <div class="title">
    Quiz: {{quizId}}
  </div>
  <div id="quiz-container">
    <form id="quiz-form">
      <div id="question-container"></div>
    </form>
  </div>
  <div id="delete-popup" class="popup">
    <form id="delete-form">
      <h4>Confirm Delete Action</h4>
      <p> *This action will permanently delete this question!</p>
      <input type="checkbox" id="confirm-delete" required>
      <label for="confirm-delete">Yes! I am sure i want to delete.</label>
      <div>
        <button type="submit">Delete</button>
        <button type="button" id="cancel-delete">Back</button>
      </div>
    </form>
  </div>

  <div id="edit-question-popup">
    <form id="question-form">
      <label for="quiz-id" class="required-label">Quiz ID: </label>
      <input type="text" id="quiz-id" name="quiz-id" disabled>
  
      <label for="question-id" class="required-label">Question ID: </label>
      <input type="text" id="question-id" name="question-id" maxlength="7" required>
      <span id="question-id-status"><i class="fas"></i></span>
      <button onclick="resetQuestionId(event)">Reset</button>
  
      <label for="question-marks" class="required-label">Marks: </label>
      <input type="number" id="question-marks" name="question-marks" required>
      <button onclick="resetQuestionMarks(event)">Reset</button>
  
      <label for="question-type" class="required-label">Question Type: </label>
      <select id="question-type" name="question-type" onchange="toggleTextarea()" required>
        <option value="" selected>Select Question Type</option>
        <option value="MCQ">Multiple Choice</option>
        <option value="TF">True/False</option>
        <option value="FB">Fill-in-the-Blank</option>
        <option value="FMB">Fill-in-Multiple-Blanks</option>
        <option value="MA">Multiple Answers</option>
        <option value="DD">Drop-Down</option>
        <option value="MATCH">Matching</option>
        <option value="NUM">Numerical Answer</option>
        <option value="ESSAY">Essay Based</option>
        <option value="UPLOAD">File Upload</option>
      </select>
      <button onclick="resetQuestionType(event)">Reset</button>
    
      <label for="question-text" class="required-label">Question Text: </label>
      <div id="question-text-input" contenteditable="false"></div>
      <input type="hidden" id="question-text" name="question-text" required>
      <div id="question-text-message"></div>
      <button onclick="resetQuestionText(event)">Reset</button>
  
      <div id="buttons-container"></div>
    
      <div id="options-container"></div>
  
      <button type="reset" onclick="resetQuestion()">Reset</button>
      <button type="submit" id="save-button" onclick="saveForm(event)">Save</button>
      <button type="button" id="cancel-edit-question">Cancel</button>
    </form>
  </div>

</div>


<script>
  const quizUrl = '{% url 'Quiz:preview_quiz_json' %}';
  const quizId = '{{quizId}}';
  const deleteQuestionUrl = '{% url 'Quiz:delete_question' %}';
  const thisPage = `/quiz/preview-quiz/${quizId}`;
</script>

<script src="{% static 'quiz/preview_quiz.js' %}"></script>
<script src="{% static 'quiz/add_question.js' %}"></script>

{% endblock body %}
